services:
    simple-bot:
        build: .
        restart: unless-stopped
        user: "0:0"  # safe â€” rootless Docker maps UID 0 to host user
        cap_add:
            - NET_ADMIN  # for iptables LAN blocking in entrypoint
        networks:
            isolated:
            shared-services:
        volumes:
            - ./config.yaml:/config/config.yaml:ro
            - ../home:/home/wren           # Wren's persistent home directory
            - ~/Documents/Obsidian/Claude:/hades:ro  # Hades vault
        environment:
            - HOME=/home/wren
        env_file:
            - .env

networks:
    isolated:
        driver: bridge
    shared-services:
        external: true
